---
alwaysApply: true
---
#  REGLAS DE ORO COMPLETAS - CORPCHAT

Este documento recopila todas las reglas de oro establecidas para el desarrollo del proyecto CorpChat.

## 1.  DESARROLLO LOCAL PRIMERO

### **Regla de Oro #1: Desarrollo Local Obligatorio**
- **TODO** el desarrollo debe hacerse en Docker Desktop local antes de pasar a Cloud Run
- Solo despu茅s de validar y probar localmente, se despliega a Cloud Run
- Esto garantiza estabilidad y reduce errores en producci贸n

### **Regla de Oro #2: Verificaci贸n de Prerequisitos**
- Comprobar que la m谩quina tenga todos los prerequisitos listos para desarrollar
- Incluir verificaci贸n de Docker, Python, gcloud CLI, etc.
- Documentar cualquier dependencia adicional necesaria

### **Regla de Oro #3: Entorno Virtual Python**
- Usar **venv** de Python para instalaci贸n de paquetes
- Nunca instalar paquetes globalmente
- Mantener `requirements.txt` actualizados

### **Regla de Oro #4: Namespace Unificado**
- Agrupar todos los Docker en el mismo namespace
- Usar nombres consistentes: `corpchat-*`
- Facilitar gesti贸n y limpieza de contenedores

## 2.  AUTENTICACIN Y SEGURIDAD

### **Regla de Oro #5: Autenticaci贸n Google Local**
- Solucionar la autenticaci贸n integrada de Google para desarrollo local
- Usar Application Default Credentials (ADC) cuando sea posible
- Mantener credenciales seguras y no hardcodear

### **Regla de Oro #6: No Hardcoding**
- Eliminar todo el hardcoding de variables cr铆ticas (endpoints, secrets, project IDs)
- Usar variables de entorno para multi-client replicability
- Validar que no haya valores hardcodeados en el c贸digo

## 3.  DEPLOYMENT Y VALIDACIN

### **Regla de Oro #7: Validaci贸n Post-Deployment**
- Despu茅s de cada deployment mensual, validar que todas las Cloud Run services est茅n habilitadas
- Verificar acceso correcto (interno o externo seg煤n requerimientos)
- Ejecutar scripts de validaci贸n autom谩tica

### **Regla de Oro #8: Verificaci贸n Completa de Servicios**
- Verificar que todos los servicios funcionen despu茅s de cada cambio
- No asumir que un servicio funciona sin validaci贸n
- Usar tests E2E para validar funcionalidad completa

## 4. И TESTING Y CALIDAD

### **Regla de Oro #9: Testing Real Obligatorio**
- Testing real obligatorio para cada componente antes de continuar
- Usar datos y acciones reales, nunca sint茅ticas o mockeadas
- Validar con flujos de usuario reales, APIs, bases de datos y servicios externos
- Las pruebas de latencia deben ser mediciones reales end-to-end

### **Regla de Oro #10: M谩ximo 2 Intentos**
- Cada requerimiento debe tener m谩ximo 2 intentos de soluci贸n antes de consultar documentaci贸n
- Si no se resuelve en 2 intentos, revisar documentaci贸n oficial
- Evitar ciclos infinitos de correcci贸n

## 5.  DOCUMENTACIN Y ARQUITECTURA

### **Regla de Oro #11: Documentaci贸n Actualizada**
- Mantener PRD actualizado con todos los requerimientos funcionales y no funcionales
- Documentar todas las decisiones arquitect贸nicas
- Incluir gu铆as de setup y deployment

### **Regla de Oro #12: Arquitectura Multi-Cliente**
- Dise帽ar para multi-client replicability desde el inicio
- Usar Infrastructure as Code (Terraform)
- Parametrizar todo lo necesario para diferentes clientes

## 6.  PROCESO DE DESARROLLO

### **Regla de Oro #13: Desarrollo Iterativo**
- Seguir metodolog铆a SCRUM con sprints definidos
- No pedir confirmaci贸n para mover entre sprints si las tareas est谩n completas
- Mantener tracking en SCRUM_PLAN.md

### **Regla de Oro #14: Integraci贸n Continua**
- Usar Cloud Build para CI/CD
- Automatizar deployment y validaci贸n
- Mantener logs detallados de todos los procesos

## 7.  CALIDAD DE CDIGO

### **Regla de Oro #15: Estilo de Desarrollo**
- Seguir gu铆a de estilo definida (PascalCase para clases, snake_case para funciones)
- Usar type hints de Python
- Implementar logging estructurado
- Manejo robusto de errores

### **Regla de Oro #16: Performance y Escalabilidad**
- Optimizar para performance desde el inicio
- Considerar escalabilidad en el dise帽o
- Monitorear m茅tricas de rendimiento

## 8.  CONECTIVIDAD Y REDES

### **Regla de Oro #17: Conectividad Local**
- Asegurar que todos los servicios puedan comunicarse localmente
- Usar redes Docker apropiadas
- Configurar DNS interno si es necesario

### **Regla de Oro #18: Fallback y Resilencia**
- Implementar fallbacks para servicios externos
- Manejar desconexiones de red graciosamente
- Payload de respuesta consistente

---

## 9.  COMUNICACIN Y FEEDBACK

### **Regla de Oro #19: Comunicaci贸n Directa y sin Filtros**
- El asistente de IA debe ser directo, conciso y evitar el lenguaje sicofante ("tienes raz贸n", "excelente punto").
- Si una solicitud del usuario es incorrecta, ambigua o est谩 planificada para una fase posterior, el asistente debe se帽alarlo claramente.
- El objetivo es un di谩logo t茅cnico y eficiente, no una conversaci贸n social.

## 10.  AUTONOMA Y DIRECTIVAS DEL ASISTENTE

### **Regla de Oro #20: Autonom铆a en Arquitectura y Decisiones T茅cnicas**
- El asistente de IA es totalmente aut贸nomo para tomar las decisiones de arquitectura de software que mejor cumplan con los requerimientos del proyecto.
- Todas las decisiones se basar谩n en las mejores pr谩cticas de la industria y los principios de un dise帽o robusto, escalable y mantenible.
- NUNCA presentar opciones al usuario para decisiones de arquitectura. El asistente debe tomar la mejor decisi贸n directamente.

### **Regla de Oro #21: Autonom铆a en Ejecuci贸n y Validaci贸n**
- El asistente de IA es aut贸nomo para ejecutar todos los comandos necesarios para el desarrollo, validaci贸n, revisi贸n y despliegue del proyecto.
- Es responsabilidad del asistente verificar la salida de cada comando y garantizar que el sistema se encuentre en un estado funcional antes de notificar al usuario.

### **Regla de Oro #22: Comunicaci贸n Concisa**
- Las respuestas del asistente deben ser cortas y concretas, yendo directamente al punto para mantener un ritmo de desarrollo 谩gil y eficiente.

### **Regla de Oro #23: Adherencia a las Reglas de Oro**
- El asistente NUNCA DEBE OLVIDAR las reglas de oro. Son la directiva principal que gobierna todas sus acciones y respuestas.

### **Regla de Oro #24: Evaluaci贸n M煤ltiple de Soluciones**
- Antes de implementar una soluci贸n, el asistente DEBE evaluar al menos **3 alternativas diferentes**.
- Cada soluci贸n propuesta DEBE estar respaldada por **documentaci贸n oficial** (documentaci贸n de Open WebUI, ADK, Google Cloud, etc.).
- El asistente DEBE aplicar la mejor soluci贸n basada en la evaluaci贸n, no la primera que se le ocurra.
- Esto previene implementar soluciones que luego no sean viables y optimiza el tiempo de desarrollo.

##  CHECKLIST DE CUMPLIMIENTO

Antes de cada deployment, verificar:

- [ ] Desarrollo completado y probado localmente
- [ ] Prerequisitos verificados
- [ ] Entorno virtual Python configurado
- [ ] Docker containers en namespace unificado
- [ ] Autenticaci贸n Google funcionando localmente
- [ ] No hay hardcoding en el c贸digo
- [ ] Tests E2E pasando
- [ ] Documentaci贸n actualizada
- [ ] Servicios validados y funcionando
- [ ] Acceso p煤blico configurado correctamente

##  VIOLACIONES DE REGLAS DE ORO

Si se detecta violaci贸n de alguna regla de oro:

1. **PARAR** el desarrollo inmediatamente
2. **CORREGIR** la violaci贸n antes de continuar
3. **DOCUMENTAR** la correcci贸n
4. **ACTUALIZAR** procesos si es necesario

---

**Fecha de 煤ltima actualizaci贸n**: 2025-10-26
**Versi贸n**: 2.1
**Autor**: CorpChat Development Team

